<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chimera Dashboard</title>
    <meta name="description" content="Chimera Data Ingestion Monitoring Dashboard">
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸ”¥</text></svg>">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
</head>

<body>
    <div class="app">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <span class="logo-icon">ðŸ”¥</span>
                    <h1>Chimera</h1>
                </div>
                <div class="header-meta">
                    <span class="env-badge" id="environment">dev</span>
                    <span class="status-indicator" id="system-status">
                        <span class="status-dot"></span>
                        Checking...
                    </span>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main">
            <!-- System Health Card -->
            <section class="health-section">
                <div class="section-header">
                    <h2>System Health</h2>
                    <button class="btn btn-secondary" id="refresh-btn">
                        <span class="btn-icon">â†»</span>
                        Refresh
                    </button>
                </div>
                <div class="health-grid" id="health-grid">
                    <!-- Populated by JavaScript -->
                    <div class="health-card loading">
                        <div class="spinner"></div>
                        <span>Loading health status...</span>
                    </div>
                </div>
            </section>

            <!-- Data Sources Grid -->
            <section class="sources-section">
                <div class="section-header">
                    <h2>Data Sources</h2>
                    <span class="last-updated" id="last-updated">Last updated: --</span>
                </div>
                <div class="sources-grid" id="sources-grid">
                    <!-- Populated by JavaScript -->
                    <div class="source-card loading">
                        <div class="spinner"></div>
                        <span>Loading data sources...</span>
                    </div>
                </div>
            </section>

            <!-- Data Alignment Section -->
            <section class="alignment-section">
                <div class="section-header">
                    <h2>Temporal Alignment (Phase 2)</h2>
                    <button class="btn btn-primary" id="trigger-alignment-btn">
                        <span class="btn-icon">âš¡</span>
                        Align Data
                    </button>
                </div>
                <div class="alignment-status-card" id="alignment-card">
                    <div class="alignment-info">
                        <strong>Latest Master Dataset:</strong>
                        <span id="alignment-file">Checking...</span>
                    </div>
                    <div class="alignment-meta">
                        <span id="alignment-time">--</span>
                        <span id="alignment-size">--</span>
                    </div>
                </div>
            </section>

            <!-- AI Analysis Section (Phase 3) -->
            <section class="analysis-section">
                <div class="section-header">
                    <h2>AI Pattern Discovery (Phase 3)</h2>
                    <button class="btn btn-primary" id="trigger-analysis-btn">
                        <span class="btn-icon">ðŸ”¬</span>
                        Analyze Correlations
                    </button>
                </div>
                <div class="analysis-status-card" id="analysis-card">
                    <div class="analysis-info">
                        <strong>Correlation Results:</strong>
                        <span id="analysis-status">Checking...</span>
                    </div>
                    <div class="analysis-meta">
                        <span id="analysis-count">--</span>
                        <span id="analysis-time">--</span>
                    </div>
                </div>
                <div class="correlations-preview" id="correlations-preview" style="display: none;">
                    <h4>Top Correlations</h4>
                    <div class="correlation-list" id="correlation-list">
                        <!-- Populated by JavaScript -->
                    </div>
                    <div class="correlation-controls" id="correlation-controls" style="display: none;">
                        <button class="btn btn-secondary" id="load-more-btn">
                            Load More
                        </button>
                        <button class="btn btn-outline" id="download-csv-btn">
                            â¬‡ Download Full Report (CSV)
                        </button>
                    </div>
                </div>
            </section>

            <!-- Activity Log -->
            <section class="activity-section">
                <div class="section-header">
                    <h2>Recent Activity</h2>
                </div>
                <div class="activity-log" id="activity-log">
                    <div class="activity-item">
                        <span class="activity-time">--:--</span>
                        <span class="activity-message">Waiting for data...</span>
                    </div>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-content">
                <span>Chimera Data Ingestion System</span>
                <span>â€¢</span>
                <span id="api-url">API: Not configured</span>
                <span>â€¢</span>
                <span>&copy; 2026 Chimera Project. All rights reserved.</span>
            </div>
        </footer>
    </div>

    <!-- Config Modal -->
    <div class="modal" id="config-modal">
        <div class="modal-content">
            <h3>Configure API URL</h3>
            <input type="text" id="api-input" placeholder="https://xxx.execute-api.us-east-1.amazonaws.com/dev">
            <div class="modal-actions">
                <button class="btn btn-primary" id="save-config">Save</button>
                <button class="btn btn-secondary" id="cancel-config">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Data Viewer Modal -->
    <div class="modal" id="data-modal">
        <div class="modal-content data-modal-content">
            <div class="data-modal-header">
                <h3 id="data-modal-title">Data Viewer</h3>
                <button class="btn-close" id="close-data-modal">Ã—</button>
            </div>
            <div class="data-modal-meta">
                <span class="data-meta-item">
                    <span class="data-meta-label">S3 Key:</span>
                    <span class="data-meta-value" id="data-s3-key">--</span>
                </span>
                <span class="data-meta-item">
                    <span class="data-meta-label">Last Modified:</span>
                    <span class="data-meta-value" id="data-last-modified">--</span>
                </span>
            </div>
            <div class="data-viewer" id="data-viewer">
                <pre><code id="data-content">Loading...</code></pre>
            </div>
        </div>
    </div>

    <script src="js/app.js?v=FIX_502_FINAL"></script>
</body>

</html>